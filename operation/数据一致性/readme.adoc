
= 数据一致性
:toc: right

== 写入方式

=== 双写（先 DB 再 cache，写多读少场景）

redis 删代替更新

    多线程同时写，可能导致数据不一致，A 写数据 -》 B 写数据库 -》 B 写缓存 -》 A 写缓存

=== 订阅 binlog

=== redis 发布/订阅（先 redis 再 db，读多写少场景）

== 重试机制

=== 消息队列

== 不一致挽回机制

. 重试机制
. key 设置有效期，就算不一致后面失效会再更新
